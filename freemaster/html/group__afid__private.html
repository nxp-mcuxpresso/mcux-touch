<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NXP Touch Library Reference Manual: Advanced Filtering and Integrating Detection</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nxp_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">NXP Touch Library Reference Manual
   &#160;<span id="projectnumber">Rev 2.0</span>
   </div>
   <div id="projectbrief">NXP Semiconductors, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__afid__private.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Advanced Filtering and Integrating Detection<div class="ingroups"><a class="el" href="group__detectors__private.html">Key Detectors</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>The AFID (Advanced Filtering and Integrating Detection) key detector is based on using two IIR filters with different depths (one short / fast, the other long / slow) and on integrating the difference between the two filtered signals. The algorithm uses two thresholds; the touch threshold and the release threshold. The touch threshold is defined in the sensitivity register. The release threshold has twice the lower level than the touch threshold. If the integrated signal is higher than the touch threshold, or lower than the release threshold, then the integrated signal is reset. The Touch state is reported for the electrode when the first touch reset is detected. The Release state is reported, when as many release resets as the touch resets were detected during the previous touch state. </p>
<div class="dynheader">
Collaboration diagram for Advanced Filtering and Integrating Detection:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__afid__private.png" border="0" alt="" usemap="#group____afid____private"/>
<map name="group____afid____private" id="group____afid____private">
<area shape="rect" id="node2" href="group__detectors__private.html" title="Key Detectors" alt="" coords="5,13,111,39"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structnt__keydetector__afid__asc__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__afid__private.html#structnt__keydetector__afid__asc__data">nt_keydetector_afid_asc_data</a></td></tr>
<tr class="separator:structnt__keydetector__afid__asc__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structnt__keydetector__afid__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__afid__private.html#structnt__keydetector__afid__data">nt_keydetector_afid_data</a></td></tr>
<tr class="separator:structnt__keydetector__afid__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadee33ebaff431c06207ac6939236a3b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__afid__private.html#gadee33ebaff431c06207ac6939236a3b8">NT_KEYDETECTOR_AFID_INITIAL_INTEGRATOR_VALUE</a></td></tr>
<tr class="separator:gadee33ebaff431c06207ac6939236a3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada390b1a2bb47db15c427b1260d76ca8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__afid__private.html#gada390b1a2bb47db15c427b1260d76ca8">NT_KEYDETECTOR_AFID_INITIAL_RESET_TOUCH_COUNTER_VALUE</a></td></tr>
<tr class="separator:gada390b1a2bb47db15c427b1260d76ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72be26ca31cae70bc10ffcc615f69cf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__afid__private.html#ga72be26ca31cae70bc10ffcc615f69cf6">NT_KEYDETECTOR_AFID_INITIAL_RESET_RELEASE_COUNTER_VALUE</a></td></tr>
<tr class="separator:ga72be26ca31cae70bc10ffcc615f69cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structnt__keydetector__afid__asc__data" id="structnt__keydetector__afid__asc__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct nt_keydetector_afid_asc_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>AFID Automatic Sensitive Calibration RAM structure; This structure is used for internal algorithms to store the data while evaluating the AFID. Contains data of the calculating result and auxiliary variables.</p>
<p>This structure only manages and uses the internal methods. </p>
</div><div class="dynheader">
Collaboration diagram for nt_keydetector_afid_asc_data:</div>
<div class="dyncontent">
<div class="center"><img src="structnt__keydetector__afid__asc__data__coll__graph.png" border="0" usemap="#nt__keydetector__afid__asc__data_coll__map" alt="Collaboration graph"/></div>
<map name="nt__keydetector__afid__asc__data_coll__map" id="nt__keydetector__afid__asc__data_coll__map">
</map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7db603f7ab4ee195f0856b6a668f4d5f"></a>int32_t</td>
<td class="fieldname">
max_resets</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structnt__keydetector__afid__data" id="structnt__keydetector__afid__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct nt_keydetector_afid_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>AFID Ram structure; This structure is used for internal algorithms to store the data while evaluating the AFID. Contains the data of the calculating result and auxiliary variables.</p>
<p>This structure only manages and uses the internal methods. </p>
</div><div class="dynheader">
Collaboration diagram for nt_keydetector_afid_data:</div>
<div class="dyncontent">
<div class="center"><img src="structnt__keydetector__afid__data__coll__graph.png" border="0" usemap="#nt__keydetector__afid__data_coll__map" alt="Collaboration graph"/></div>
<map name="nt__keydetector__afid__data_coll__map" id="nt__keydetector__afid__data_coll__map">
<area shape="rect" id="node2" href="group__afid__private.html#structnt__keydetector__afid__asc__data" title="{nt_keydetector_afid\l_asc_data\n|+ max_resets\l|}" alt="" coords="5,13,140,105"/><area shape="rect" id="node3" href="group__filter__private.html#structnt__filter__moving__average__data" title="{nt_filter_moving_average_data\n|+ sum\l|}" alt="" coords="165,20,359,97"/><area shape="rect" id="node4" href="group__filter__private.html#structnt__filter__fbutt__data" title="{nt_filter_fbutt_data\n|+ y\l+ x\l+ coeficient\l|}" alt="" coords="383,5,511,112"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a89340176afdfa7ca427ef97372ee14fd"></a>struct <a class="el" href="group__afid__private.html#structnt__keydetector__afid__asc__data">nt_keydetector_afid_asc_data</a></td>
<td class="fieldname">
asc</td>
<td class="fielddoc">
<p>Storage of ASC (Automatic sensitive calibration) data for AFID </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a3fa1815b2a48dc3b91b0b7fe6138bfb9"></a>struct <br class="typebreak"/>
<a class="el" href="group__filter__private.html#structnt__filter__moving__average__data">nt_filter_moving_average_data</a></td>
<td class="fieldname">
base_avrg</td>
<td class="fielddoc">
<p>Base line moving average filter data. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a834e64c1882577582c17c79615816026"></a>struct <a class="el" href="group__filter__private.html#structnt__filter__fbutt__data">nt_filter_fbutt_data</a></td>
<td class="fieldname">
fast_signal_filter</td>
<td class="fielddoc">
<p>Signal fast butterworth filter data storage. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a149746d7592f78e34486350f40d82d6b"></a>uint8_t</td>
<td class="fieldname">
filter_state</td>
<td class="fielddoc">
<p>State of filter. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2036ce15a0f2e73cee9d5df2b937b3b1"></a>int32_t</td>
<td class="fieldname">
integration_value</td>
<td class="fielddoc">
<p>Current value of internal integrator. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a90578a3e12470b6c42ae7e30e7f53aa8"></a>uint32_t</td>
<td class="fieldname">
release_reset_counter</td>
<td class="fielddoc">
<p>Count of release events resets. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a302d5035db8efd949aa20ccace460973"></a>uint16_t</td>
<td class="fieldname">
slow_signal</td>
<td class="fielddoc">
<p>Slow signal value . </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a947e8bbc2f6865213cd3710e9d1c39d8"></a>struct <a class="el" href="group__filter__private.html#structnt__filter__fbutt__data">nt_filter_fbutt_data</a></td>
<td class="fieldname">
slow_signal_filter</td>
<td class="fielddoc">
<p>Signal slow butterworth filter data storage. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a12b4017a89c78b82c7155a01b7723584"></a>uint32_t</td>
<td class="fieldname">
touch_reset_counter</td>
<td class="fielddoc">
<p>Count of touch resets. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae5a6cf88ef2544eaa45c3fe41789a072"></a>uint32_t</td>
<td class="fieldname">
touch_threshold</td>
<td class="fielddoc">
<p>Current threshold value for integrator resets. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gadee33ebaff431c06207ac6939236a3b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NT_KEYDETECTOR_AFID_INITIAL_INTEGRATOR_VALUE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The initial integration value of the AFID. </p>

</div>
</div>
<a class="anchor" id="ga72be26ca31cae70bc10ffcc615f69cf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NT_KEYDETECTOR_AFID_INITIAL_RESET_RELEASE_COUNTER_VALUE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The reset threshold value of the AFID. </p>

</div>
</div>
<a class="anchor" id="gada390b1a2bb47db15c427b1260d76ca8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NT_KEYDETECTOR_AFID_INITIAL_RESET_TOUCH_COUNTER_VALUE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The initial reset counter value of the AFID. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Aug 2 2024 08:33:28 for NXP Touch Library Reference Manual by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
