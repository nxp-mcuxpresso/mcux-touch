<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NXP Touch Library Reference Manual: Safa Detector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nxp_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">NXP Touch Library Reference Manual
   &#160;<span id="projectnumber">Rev 2.0</span>
   </div>
   <div id="projectbrief">NXP Semiconductors, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__safa__prv.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">Safa Detector<div class="ingroups"><a class="el" href="group__detectors__private.html">Key Detectors</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>Safa key detector is a method for recognition of touch or release states. It can be used for each type of control.</p>
<p>If the measured sample is reported as a valid sample, the module calculates the delta value from the actual signal value and the baseline value. The delta value is compared to the threshold value computed from the expected signal and baseline values. Based on the result, it determines the electrode state, which can be released, touched, changing from released to touched, and changing from touched to released. The method is using moving average filters to determine the baseline and expected signal values with a different depth of the filter, depending on the state of the electrode. The deadband filters in the horizontal and vertical directions are also implemented. </p>
<div class="dynheader">
Collaboration diagram for Safa Detector:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__safa__prv.png" border="0" alt="" usemap="#group____safa____prv"/>
<map name="group____safa____prv" id="group____safa____prv">
<area shape="rect" id="node1" href="group__detectors__private.html" title="Key Detectors" alt="" coords="5,5,111,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structnt__keydetector__safa__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__safa__prv.html#structnt__keydetector__safa__data">nt_keydetector_safa_data</a></td></tr>
<tr class="separator:structnt__keydetector__safa__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structnt__keydetector__safa__data" id="structnt__keydetector__safa__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct nt_keydetector_safa_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Safa RAM structure. This structure is used for internal algorithms to store data, while evaluating Safa. Contains the data of result calculation and auxiliary variables.</p>
<p>This structure only manages and uses internal methods. </p>
</div><div class="dynheader">
Collaboration diagram for nt_keydetector_safa_data:</div>
<div class="dyncontent">
<div class="center"><img src="structnt__keydetector__safa__data__coll__graph.png" border="0" usemap="#nt__keydetector__safa__data_coll__map" alt="Collaboration graph"/></div>
<map name="nt__keydetector__safa__data_coll__map" id="nt__keydetector__safa__data_coll__map">
<area shape="rect" id="node2" href="group__filter__private.html#structnt__filter__moving__average__data" title="{nt_filter_moving_average_data\n|+ sum\l|}" alt="" coords="5,5,200,83"/><area shape="rect" id="node3" href="group__filter.html#structnt__filter__moving__average" title="{nt_filter_moving_average\n|+ n2_order\l|}" alt="" coords="224,5,387,83"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a081a95b49633436b970e45b69253e782"></a>struct <br class="typebreak"/>
<a class="el" href="group__filter__private.html#structnt__filter__moving__average__data">nt_filter_moving_average_data</a></td>
<td class="fieldname">
base_avrg</td>
<td class="fielddoc">
<p>Baseline moving average filter data. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a404a3a68f9cd7f3c6a27024aaae6b3e8"></a>struct <a class="el" href="group__filter.html#structnt__filter__moving__average">nt_filter_moving_average</a></td>
<td class="fieldname">
base_avrg_init</td>
<td class="fielddoc">
<p>Baseline moving average filter settings. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a437975ac6f8e4532fda13ffb0ffb31ff"></a>int32_t</td>
<td class="fieldname">
deadband_cnt</td>
<td class="fielddoc">
<p>Deadband event counter. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a8588f345e439700fe99d8ec130ab273d"></a>uint32_t</td>
<td class="fieldname">
deadband_h</td>
<td class="fielddoc">
<p>Deadband high watermark </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7a497aefa348a9be81e242e2e6bd4199"></a>uint32_t</td>
<td class="fieldname">
deadband_l</td>
<td class="fielddoc">
<p>Deadband low watermark </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aff7d4465b1b781e3c44f37662ffe8aed"></a>int32_t</td>
<td class="fieldname">
entry_event_cnt</td>
<td class="fielddoc">
<p>Event counter value. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5a2da73473446fe7f232d02ec3f8c881"></a>uint32_t</td>
<td class="fieldname">
f_noise</td>
<td class="fielddoc">
<p>Fast Noise value. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1514559b23ab647988388864a9e2b17e"></a>struct <br class="typebreak"/>
<a class="el" href="group__filter__private.html#structnt__filter__moving__average__data">nt_filter_moving_average_data</a></td>
<td class="fieldname">
f_noise_avrg</td>
<td class="fielddoc">
<p>Fast Noise signal moving average filter data. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a668d00072ef189c62d52965e2fd05756"></a>struct <a class="el" href="group__filter.html#structnt__filter__moving__average">nt_filter_moving_average</a></td>
<td class="fieldname">
f_noise_avrg_init</td>
<td class="fielddoc">
<p>Fast Noise moving average filter settings. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a74daebc7c9737e50c69b04e66a97cddd"></a>enum <a class="el" href="group__filter__private.html#ga0f0268290e12b9076137176a513ae59a">nt_filter_state</a></td>
<td class="fieldname">
filter_state</td>
<td class="fielddoc">
<p>Input filter state. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af994a8f6a84a0fefe7322ade98e1d44c"></a>uint32_t</td>
<td class="fieldname">
noise</td>
<td class="fielddoc">
<p>Noise value. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a81b409ec3ace28062a53b94b97e883c1"></a>struct <br class="typebreak"/>
<a class="el" href="group__filter__private.html#structnt__filter__moving__average__data">nt_filter_moving_average_data</a></td>
<td class="fieldname">
noise_avrg</td>
<td class="fielddoc">
<p>Noise signal moving average filter data. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aa85bff563c1d44b5449f31397bdddd89"></a>struct <a class="el" href="group__filter.html#structnt__filter__moving__average">nt_filter_moving_average</a></td>
<td class="fieldname">
noise_avrg_init</td>
<td class="fielddoc">
<p>Noise moving average filter settings. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a48bac94ea9e17d0d83a8c0c9e09142e4"></a>uint32_t</td>
<td class="fieldname">
predicted_signal</td>
<td class="fielddoc">
<p>Predicted signal value. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a43ba883550976723b86a445ac777408a"></a>struct <br class="typebreak"/>
<a class="el" href="group__filter__private.html#structnt__filter__moving__average__data">nt_filter_moving_average_data</a></td>
<td class="fieldname">
predicted_signal_avrg</td>
<td class="fielddoc">
<p>Predicted signal line moving average filter data. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a4485fff84010c71a60171526bc236f95"></a>struct <a class="el" href="group__filter.html#structnt__filter__moving__average">nt_filter_moving_average</a></td>
<td class="fieldname">
predicted_signal_avrg_init</td>
<td class="fielddoc">
<p>Predicted signal moving average filter settings. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aef3035d9d04c0a0446b308d52e1d3d2f"></a>int32_t</td>
<td class="fieldname">
recovery_cnt</td>
<td class="fielddoc">
<p>Recovery counter. </p>
</td></tr>
</table>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Aug 2 2024 08:33:28 for NXP Touch Library Reference Manual by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
