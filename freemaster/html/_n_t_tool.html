<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NXP Touch Library Reference Manual: Touch GUI Tool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nxp_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">NXP Touch Library Reference Manual
   &#160;<span id="projectnumber">Rev 2.0</span>
   </div>
   <div id="projectbrief">NXP Semiconductors, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_n_t_tool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Touch GUI Tool </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="NT_tool_1"></a>
Touch GUI Tool</h1>
<p>The NXP Touch GUI Tool enables you to generate static configuration and online parameters tuning for the NXP Touch Library easily using a user-friendly Graphic User Interface (GUI). The NXP Touch GUI Tool is integrated into the FreeMASTER software as two bookmarks named <b><em>TOUCH HW LAYER</em></b> and <b><em>TOUCH SW LAYER</em></b>. This all-in-one solution enables you to read and watch the NXP Touch variables in real time (bookmarks: <em>MODULES</em>, <em>CONTROLS</em> and <em>ELECTRODES</em>) and to write (or modify) the variables as well. The NXP Touch GUI tool can generate static configuration files (used before the project is built) and dynamic tuning (or debugging) to modify the variables or parameters online while the MCU is running (requires enabling the FreeMASTER communication and placing the tuning parameters into the RAM).</p>
<div class="image">
<img src="GUI_intro.png" alt="GUI_intro.png"/>
<div class="caption">
NXP Touch GUI Tool - HW configuration</div></div>
<p>The <b>Basic/Expert</b> switch hides the less important items (sets them to the default values) in the "Basic" mode or shows all items in the "Expert" mode (the "Expert" mode enables you to assign the same electrode to more controls or configure the safety). The <b><em>READ CONFIGURATION FROM BOARD</em></b> button imports the configuration from the board to the NXP Touch GUI Tool (requires enabling the FreeMASTER communication). The most important NXP Touch GUI Tool feature is generating the NXP Touch Library configuration. The whole NXP Touch configuration is placed into the <em>nt_setup.c</em> and <em>nt_setup.h</em> files. The generated configuration files are located releatively in the <em>freemaster/src</em> directory. The <em>nt_setup.c</em> file is shown in the NXP Touch GUI Tool <em>GENERATED CONFIGURATION</em> bookmark. The Touch GUI Tool enables you to generate both configuration files, but it cannot read the configuration back from the <em>nt_setup.c</em> and <em>nt_setup.h</em> files. Therefore, the tool can store and read the whole configuration to (or from) an .xml file located relatively in the <em>freemaster/src</em> directory as well. These are the recommended steps to use the tool:</p>
<ul>
<li>Save the .xml file name for the Touch Tool Configuration or load the .xml file configuration from another source (demo project).</li>
<li>Set the <em>Basic</em> mode if you are a beginner or if you want to see only the important set of NXP Touch parameters. Otherwise, select the "Expert" mode.</li>
<li>Set the Module Type (a peripheral measuring the capacity).</li>
<li>Create or change the configuration in the <em>TOUCH HW LAYER</em> and <em>TOUCH SW LAYER</em> bookmarks. Parse the <em>board.h</em> file from the MCUXpresso SDK to read the macros for the <b><em>pin_input</em></b> of each electrode or assign the self-cap or mutual-cap electrode numbers in the <em>TOUCH SW LAYER</em> bookmark. Check the <b><em>Place configuration to RAM</em></b> for the library layer determine for tuning and debugging in the <em>TOUCH SW LAYER</em> bookmark.</li>
<li>Generate the <em>nt_setup.c</em> (including callbacks and other function templates as a comment) and <em>nt_setup.h</em> files.</li>
<li>Compile the project and download the NXP Touch library code to the flash memory.</li>
<li>Start the FreeMASTER communication (by clicking the red STOP button) to watch the variables and adjust the configuration parameters (only if the <em>Place configuration to RAM</em> checkbox is checked).</li>
</ul>
<p>If the action after clicking the specific button is successful, a green checked icon is shown on the right-hand side of the button. In case of a failure, a red icon with a cross and a pop-up help with the error description appears (when you hover the mouse cursor above the icon).</p>
<p>Like the NXP Touch library, the NXP Touch GUI Tool is divided into the following sections:</p>
<ul>
<li><a class="el" href="group__system.html">System</a> (<em>TOUCH SW LAYER</em> bookmark)</li>
<li><a class="el" href="group__modules.html">Modules</a> (<em>TOUCH HW LAYER</em> bookmark, software thresholds are in the <em>TOUCH SW LAYER</em> bookmark)</li>
<li><a class="el" href="group__controls.html">Controls</a> (<em>TOUCH SW LAYER</em> bookmark)</li>
<li><a class="el" href="group__electrodes.html">Electrodes</a> (<em>TOUCH SW LAYER</em> bookmark)</li>
</ul>
<div class="image">
<img src="GUI_Control.png" alt="GUI_Control.png"/>
<div class="caption">
Control section configuration</div></div>
<p>Each section has its own name and other parameters corresponding to the NXP Touch Library parameters to be written, set, checked, or chosen from the list boxes. The specific configuration can be easily created or modified from the previously defined configuration (stored as an .xml file). The NT Controls and NT Electrodes sections enable you to create more bookmarks corresponding to each new electrode or control. To add a new electrode or control, click the plus button placed on the right-hand side of the control or electrode number (above the electrode or control bookmarks). In the "Basic" mode, when you assign an electrode to a specific control, the electrode is disabled for other controls (the "Expert" mode enables you to assign the same electrode to more controls or configure the safety). The electrode cannot be assigned to more controls and the electrode checkbox is disabled (the checkbox is grayed out). A similar behavior can be shown for the shielding electrode. The Touch GUI Tool can decode the pin setting from the board.h file or the self-cap or mutual-cap channel can be directly chosen from the channel list box. Each created electrode is assigned to the module by default. The control type and its parameters can be specified for each control. A short pop-up help is shown after you point to the parameter name. For each electrode, the key detector and its own configuration parameters can be defined. To simplify the key detector configuration, the key-detector setting can be shared (copied) among the electrodes. The real electrode data can be shown by clicking the <b><em>Show</em></b> button in the electrode section enabling to see the real touch or release electrode event when the keydetector is tuned. The waveform to be affected by the parameter modification is written in the parameter pop-up help. Each created control or electrode bookmark can be removed by clicking the close cross placed on the right-hand side of the bookmark.</p>
<div class="image">
<img src="GUI_Electrode.png" alt="GUI_Electrode.png"/>
<div class="caption">
Electrode section configuration</div></div>
<p>The NXP Touch GUI Tool provides the online tuning and debugging feature. Each section has its own checkbox named <b><em>Place configuration to RAM</em></b>, modifying the structure type and removing the <b><em>const</em></b> keyword which moves the structure to the read/write memory to enable its modification for tuning and debugging purposes. After flashing such configuration, the GUI tool can write a specific parameter after you click the <b><em>Write</em></b> button. The <b><em>Read</em></b> button reads a value from the RAM (or flash) memory. The status of the writing or reading is shown as an icon after clicking the button and the pop-up help is displayed after you hover the mouse cursor above the icon.</p>
<p>The next MODULES, CONTROLS, and ELECTRODES bookmarks visualize the NXP touch quantities (live data) from defined electrodes and controls in real time and show the electrode assignment to modules or controls. The MODULES, CONTROLS, and ELECTRODES graphical objects are created according to the actual configuration loaded from the board. The NXP Touch quantities can be visualized as a waveform. After clicking the links from the MODULES or CONTROLS page, the FreeMASTER scope window opens. The FreeMASTER "Variable Watch" window shows the values of the NXP touch quantities by adding the quantities to the "Watch" properties.</p>
<div class="image">
<img src="GUI_modules_bookmark.png" alt="GUI_modules_bookmark.png"/>
<div class="caption">
Module visualization</div></div>
<p>The Crosstalk bookmark supports the cross-talk <b>activation matrix</b> adaptation and generation to the nt_setup.c file. The Crosstalk extension area consists of two heatmaps. The heatmap on the left-hand side shows the current adaptation or calibration state of the adaptation matrix. The average calibration matrix built from activation data obtained from various boards or panels is on the right-hand side. The heatmap displays in a well arranged way how strong the interference or influencing among the electrode is. The heatmap uses a color scaling similar to a rainbow. A weak or insignificant crosstalk is shown by blue cells of the matrix and the red cells show a strong or significant crosstalk. To start the adaptation process, the xtalk_adapt_on variable must be set to ON (true value). Then the crosstalk waits for the user to make a defined number of touches (crosstalk tool parameter) and defines each touch duration (xtalk Touch nt_xtalk_adapt_touch_time parameter) for each crosstalk electrode to finish the adaptation process. The crosstalk extension shows the actual state of the calibration process in the left-hand side of the tool. The column named <em><b>Touches remaining</b> displays the number of remaining touches for each crosstalk electrode. The green color means that the electrode was calibrated successfully and the red color warns the user that there are uncalibrated electrodes. The overall calibration status has two states:</p>
<ul>
<li><em>incomplete</em> - There is an uncalibrated electrode or an electrode with incomplete calibration.</li>
<li><em>complete</em> - All electrodes are calibrated by a defined number of touches and a defined touch duration. The right-hand side of the crosstalk tool averages the calibration data from other boards or panels. Each complete calibration is added to an average calibration matrix and generates the .txt file where the calibration data is stored.</li>
</ul>
<p></em></p>
<p><em></p>
<div class="image">
<img src="GUI_crosstalk.png" alt="GUI_crosstalk.png"/>
<div class="caption">
Crosstalk extension</div></div>
</em></p>
<p><em>The FreeMASTER "Scope" and "Variables" windows visualize the waveforms and quantities from the NXP Touch Library in real time, concurrently with the NXP Touch GUI Tool running (see the following figure).</em></p>
<p><em></p>
<div class="image">
<img src="GUI_scope.png" alt="GUI_scope.png"/>
<div class="caption">
NXP Touch GUI Tool layout with scope</div></div>
 </em></p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Aug 2 2024 08:33:26 for NXP Touch Library Reference Manual by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
